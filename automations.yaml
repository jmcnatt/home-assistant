# automationes.yaml

# notifcations
- alias: notify_on_garage_4a_state_change
  trigger:
    platform: template
    value_template: "{{ states('sensor.garage_4a_status') in ['Open', 'Closed'] }}"
  action:
    service: notify.all_mobile_devices
    data:
      title: "{{ trigger.to_state.name }} {{trigger.to_state.state}}"
      message: "Home Assistant has detected that {{ trigger.to_state.name }} is now {{trigger.to_state.state}}."

- alias: notify_on_garage_4c_state_change
  trigger:
    platform: template
    value_template: "{{ states('sensor.garage_4c_status') in ['Open', 'Closed'] }}"
  action:
    service: notify.all_mobile_devices
    data:
      title: "{{ trigger.to_state.name }} {{trigger.to_state.state}}"
      message: "Home Assistant has detected that {{ trigger.to_state.name }} is now {{trigger.to_state.state}}."

# lights
- alias: 'Turn on balcony lights at sunset'
  trigger:
    - platform: sun
      event: sunset
  condition:
    condition: state
    entity_id: switch.pwr_02
    state: 'off'
  action:
    service: switch.turn_on
    entity_id: switch.pwr_02
- alias: 'Turn off balcony lights at 11:00pm'
  trigger:
    - platform: time
      at: '23:00:00'
  condition:
    condition: state
    entity_id: switch.pwr_02
    state: 'on'
  action:
    service: switch.turn_off
    entity_id: switch.pwr_02
